
# 客户端与redis通信的流程
* 客户端发建立连接的请求(socket通信模型方式)
* redis的ServerSocket接收到请求，产生AE_READABLE事件
* AE_READABLE事件交给连接应答处理器来处理
* IO多路复用程序会监听产生的事件，并将事件压入到Queue中
* 文件事件分派器会从queue中获取事件交给对应的事件处理器(连接应答处理器，命令请求处理器，命令回复处理器)
* ......

文件事件处理器是单线程的模式运行的
通过IO多路复用程序轮询监听所有客户端产生的事件，然后压入到queue中。


# 为什么单线程模型支持高并发？
* 非阻塞的多路IO复用程序（负责监听所有的事件，监听压队列)
* 事件处理器基于纯内容操作的
* 单线程模型(避免了多线程上下文切换的开销)

快的原因主要在于前两点。

# 单线程模型优缺点：
## redis单线程好处

- 代码更清晰，处理逻辑更简单
- 不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因为可能出现死锁而导致的性能消耗
- 不存在多进程或者多线程导致的切换而消耗CPU
- 所以redis线程是安全的

## 单进程单线程弊端
无法发挥多核CPU性能，不过可以通过在单机开多个Redis实例来完善；



# 参看文献

- [redis 的并发竞争问题是什么？](https://juejin.im/post/5d79ca17e51d4561e721df8e)