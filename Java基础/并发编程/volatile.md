# 并发编程有三个重要特性

- 原子性
 
	所谓原子性是指在一次的操作或者多次的操作中，`要么所有的操作全部都得到了执行并且不会受到任何因素的干扰而中断，要么所有的操作都不执行`。i++不能保证原子性，volatile关键字不保证数据的原子性，synchronized关键字保证
多个原子性操作合在一起就不是原子性操作了
简单的读取和赋值操作是原子性的，将一个变量赋值给另外一个变量的操作不是原子性的
由于synchronized是一种排他机制，因此被他修饰的同步代码是无法被中途打断的，因此其能够保证代码的原子性。
- 可见性

	可见性是指当一个线程对共享变量进行了修改，那么另外的线程可以立即看到修改后的最新值
`synchronized和Lock保证可见性`，他们会在（monitor exit）锁释放之前，会将对变量（共享资源）的修改刷新到主内存中
volatile具有保证可见性的语义

- 有序性

	有序性是指程序代码在执行过程中的先后顺序，由于Java在编译器以及运行期的优化，导致了代码的执行顺序未必就是开发者编写代码时的顺序
单利模式中的double-check的写法就是利用了volatile的顺序性

# volatile实现原理

volatile保证了不同线程对共享变量操作时的可见性，也就是说当一个线程修改了volatile修饰的变量，另外一个线程会立即看到最新的值

volatile禁止JVM和处理器对使用volatile修饰的关键字进行指令进行重排序


todo




# 参考文献

- [回顾《深入理解 Java 虚拟机》 之内存模型和 volatile 关键字](https://chenjiayang.me/2019/02/12/jvm-java-volatile/)
- [Java并发编程之Volatile](https://www.jianshu.com/p/e34469924714)